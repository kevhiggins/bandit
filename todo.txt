--- Assign workers to jobs
X-Remove ability to assign workers by clicking AbstractLocation
X-Add ability to click a job to assign a worker. The selected Job should be stored on the location along with the worker, and removed when the worker is removed.
X-Create events for JobIcon.OnAssignable etc., so that we can grey out a job that isn't selectable.
X-Assigning worker should decrement the cost from the bandit/player accordingly
X-Don't allow selecting job if the selected worker doesn't meet the requirements.
X-Reclaiming the bandit should return the cost of the job to the player/bandit
X-Add Gold/Infamy Counters, and start with a certain amount?

WishList:
Add validation to template injectors so that it will throw an exception if an attribute isn't registered


Job TODO:

PLACEMENT:
XImplement a player object with a gold amount
XAdd infamy to player
XAlter bandit construction to reveal attributes that are initialized by the bandit settings
XAlter template injector (Or data selector?!!) to watch for updates to the selected object and it's parents?

XChange bandit assignment to use job icons
XDon't allow assignment unless the bandit/player are qualified for the job cost.
XClicking the job should decrement the cost from the bandit and player.
XReclaiming the bandit should return the cost of the job to the player/bandit

SIMULATION/REWARD:


Implement Cost

Thing about highlight node problem that Joe proposed.
Find out why jobs not working in second node
Give visual feedback that the selected data is the correct type


Update HighlightedJobProvider to be like PlayerProvider


NEXT UP

IMPLEMENT SIMULATION/REWARD portion


Add the types next to the members on the DataSelector dropdowns.


Create a serialiazable object that takes an Object OR a GameObject, and displays a series of dropdowns to select attributes until a leaf property is found.
	Use that property for TemplateInjector AND for SpriteInjector

Move gold score count to a better spot (Player object?) and use the Injector to listen to the changes. Need to think on how we want to handle nested observables and similar things.
May need to check all objects between the parent and the selected value, and listen for change events

Split emblem and bandit icon on worker config for Joe

consider putting reclaimed workers in a special game object (also initially spawned workers).
Bug: Fix issue where a worker is selected, then a worker is reclaimed, and the selected worker cannot be placed.
	Seems to be due to the location not being assignable when the bandit is selected, but then being assignable afterwards (technically)

Determine ways and times a bandit can be removed from the board.
Implement job interactions with simulation phase.


Add textmeshpro functionality to TemplateInjector
Don't display anchors that dont have jobs

Jellybeans:
hide location node

Click on node

Redo worker tray to Joe's specs

Discuss:
What events to add regarding job icon appearance, hovering, exit.
Additionally, do we need global level events on any of those? For instance, if any job icon is hovered, allow a global event to toggle the job info windows visibility

Inform Settings script to use the providers selected components instead of the parents 

Turn SelectedJobProvider into a prefab with the DynamicGameObject mono behavior attached to it.
DynamicGameObject should have an activeGameObject field. Which is of type ReactiveProperty





Create serialiazable class for configuring a key and a gameobject
When those are selected, display a dropdown of all the game objects behaviors
When a behavior is selected, display a dropdown of all available public properties/fields.



Click Bandit
Display Halos around eligible locations
Click location
Display icons for jobs
hover over job
Display job info in job info box
Click job - assigns bandit
Click simulate does exciting stuff.

Don't gain money from bandit until they return to bandit hold

Display number of turns left for bandit deployment to a job.
Right click bandit to reclain on same turn deployed.

Job icon configurable through JobSettings
Look into text field templating languages?


Add JobSettings aggregation to Location



Bigger job descriptions textarea

Prevent Nan issue in deck editor
Rename deck setting to something more sensible.
Maybe prevent saving if no card? Throw error?

Add layers to node objects we don't want to see so we can hide them? Although they might still show up in hierarchy, hmm.

Modify Card settings editor to allow the following:
-Abstract card functionlity into more generic building blocks to be combined on a single card?
-Specify Card frequency
-Display card draw probability in a full deck
-Add/Remove buttons for list. Perhaps abstract this into a reusable way to display any list of objects.
-Can we move EventDirectory into a ScriptableObject?


Cost:
Stamina
Gold
Infamy

Turn Invesment

Reward:
Stamina
Gold
Infamy

Job:
Name
Description

Job Affinity

Bandit Actions

JobSettings scriptable object
BanditActions scriptable object

Make an assign phase and a simulation phase.


TravelerSpawnEvent
startTime
Traveler prefab
Traveler destination waypoint

SoldierSpawnEvent
startTime
Soldier prefab
Soldier destination waypoint

Add some Debug.Logging of the event queue for science

Make movement snappy

COOOL IDEAS:


X - Press "Battle" button
X - Pause map scene
X - Load battle scene
X - Do battle stuff

Hook the scene run button (and eventually battle success/fail) up so that it will kill the scene. Ideally this should be controlled outside of the battle overlay scene.
Create a stripped down version of the battle overlay without the EventSystem and camera audio listener. Probably without camera period?



Make it so that any collision between a traveler and a bandit opens up the fancy scene

Parameters for Battle:
Bandit Team
TravelerTeam
// Eventually Reward - Gold




https://docs.unity3d.com/ScriptReference/SceneManagement.SceneManager.html
Use LoadScene

Figure out how to fix exciting prefab issue with storing the entire overlay in a prefab.
	Can we extract the object from a scene instead?
	Otherwise, we need to figure out some way to sync prefabs.

https://unity3d.com/learn/resources/downloads
Figure out state machine limitation


Fix attack spam bug


Create a class for instantiating/managing the battle overlay

for now, just assume we are adding two units to the battle.
Set a default gold value for now that gets rewarded after battle

Add a callback to the overlay for success and failure.
	We need a way to make it trigger after we have our visual fun in the battle.

	
	
	
	
	
	
Contemplate extending animator and adding pause functionality to it, and configurable pausing, since some animators we want to pause, and some we do not.

Shader wishlist:


Figure out how to hook up the battle screen with the main game

Hook up run


-Fade from texture to a color (like grey)
-Shader to perform photoshop like layer operations (multiply, etc) blending layers?
-Draw a highlight around a texture with a 1 pixel outline







Need a confirm button for both success/fail canvases
On confirm treasure goes in pocket. (Or maybe the caravan explodes into coins)

HOW TO PAUSE AND UNPAUSE





Display reward on battle screen.
	Add a configuration for how much gold the battle is worth.

When a team wins, end the banditmon game somehow.
Same for losing.
Implement Run button as well.


Wishlist:
Battle log

Questions:
How should unit hit and unit death events chain?

Handle unit deaths in battle scene.
Figure out what else.

After each round, check to see if a team is totally dead.
If so, do the success actions
Else, do the fail action

Add running from battle


Run some basic tests on battle system with debugger logs



Add OnMouseHover script to be used with colliders


OnStruck()
Add game object anchor placeholders for the units, and configure them on the BattleIllustrator (Change it to a monobehavior)
Also configure the unit text fields on the Battle Illustrator.


Issues:
Throwing our existing prefabs into a new scene is going to be wacky. We should have a separate prefab configured onto our Unit script specifically for the battle version of a unit.



Step 1:
Setup battle HUD
Unit threat number
Bandits have first initiative
Build statemachine for combat?


Attack
HP


Step 1:
Trigger an ambush
	-Put your guy in ambush mode
	-When a special merchant comes by, an ambush happens
	-Ambush button

Step 2:
How to pause the game



Step ?:
Add text log for combat actions




X-Way to group bandits into a party
Some form of stat system.
Setup GUI system with buttons and display area.
How do we layout the units on their side of the field
Programming button actions accordingly


Setup basic selection GUI with Ambush button.
Implement the 3 bandit states, and make sure they interact with the world accordingly.
That includes ambushing merchants (add a merchant script)



Bandit ambush state for robbing caravans specifically.
	-Simplest implementation is to get more gold than normal and drop out of the ambush state.
	-Bandits in ambush state can't be punished by soldiers.
	
	
	-Idle
	-Rob
	-Ambush
	
	Can't rob travelers, but can rob merchants?
	
	Pause world on ambush to determine if you want to fight
	
	
	cooldown
	
	


Bandit purchases
Bandit upgrades
Bandit gameplay with robbing

Allow bandit to be punished
TextMeshPro

Add more soldier behavior

It seems to me that there is a delay when instantiating prefabs like particle effects/sounds for at least the first time.

Debug Gizmo for town / heat info

-Setup nuget repo for pathfinding, and use paket
https://www.nuget.org

Parking Lot:
-Instead of modifying the waypoint code directly, consider creating an observer class that automatically looks through waypoints, and configures the click collider and node visual